(()=>{var e={};e.id=977,e.ids=[220,636,977],e.modules={1221:e=>{e.exports={articlesGrid:"ArticlesList_articlesGrid__xgK4j",articleCard:"ArticlesList_articleCard__kb_PD",articleMeta:"ArticlesList_articleMeta__HNQR7",date:"ArticlesList_date__y3z4m",category:"ArticlesList_category__MYezr",summary:"ArticlesList_summary__Ryzez",readMore:"ArticlesList_readMore__jrSyT"}},5445:e=>{e.exports={sidebar:"Sidebar_sidebar__86IlD",section:"Sidebar_section__GtWJr",sectionTitle:"Sidebar_sectionTitle__s0c_b",categoryList:"Sidebar_categoryList__WMLpr",categoryItem:"Sidebar_categoryItem__e2_Ed",active:"Sidebar_active__vqrO1",tagCloud:"Sidebar_tagCloud__5097Z",tag:"Sidebar_tag__GRs72",activeTag:"Sidebar_activeTag__9siW1",count:"Sidebar_count__9n4rX"}},6289:e=>{e.exports={viewCount:"ViewCounter_viewCount__CArR4"}},7629:e=>{e.exports={pageContainer:"articles_pageContainer___Us9_",mainContent:"articles_mainContent__ihItd",pageTitle:"articles_pageTitle__l0cPO",noResults:"articles_noResults__s3A8k"}},9914:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>y,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>g,reportWebVitals:()=>_,routeModule:()=>S,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>p});var s=r(3865),i=r(9455),c=r(671),n=r(6530),l=r(3200),o=r(292),d=e([o]);o=(d.then?(await d)():d)[0];let u=(0,c.M)(o,"default"),g=(0,c.M)(o,"getStaticProps"),m=(0,c.M)(o,"getStaticPaths"),h=(0,c.M)(o,"getServerSideProps"),y=(0,c.M)(o,"config"),_=(0,c.M)(o,"reportWebVitals"),p=(0,c.M)(o,"unstable_getStaticProps"),x=(0,c.M)(o,"unstable_getStaticPaths"),j=(0,c.M)(o,"unstable_getStaticParams"),v=(0,c.M)(o,"unstable_getServerProps"),f=(0,c.M)(o,"unstable_getServerSideProps"),S=new s.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/articles",pathname:"/articles",bundlePath:"",filename:""},components:{App:l.default,Document:n.default},userland:o});a()}catch(e){a(e)}})},1364:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(8732),s=r(4158),i=r(1221),c=r.n(i),n=r(1106),l=r.n(n);let o=({articles:e=[]})=>{let t=Array.isArray(e)?e:[];return(0,a.jsx)("div",{className:c().articlesGrid,children:t.map(e=>(0,a.jsxs)("div",{className:c().articleCard,children:[(0,a.jsx)("h2",{children:(0,a.jsx)(l(),{href:`/blog/${e.id}`,className:c().title,children:e.title})}),(0,a.jsxs)("div",{className:c().articleMeta,children:[(0,a.jsx)("span",{className:c().date,children:e.date}),(0,a.jsx)("span",{className:c().category,children:e.category}),(0,a.jsx)(s.A,{articleId:e.id})]}),(0,a.jsx)("p",{className:c().summary,children:e.summary}),(0,a.jsx)(l(),{href:`/blog/${e.id}`,className:c().readMore,children:"阅读更多"})]},e.id))})}},8318:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(8732);let s=()=>(0,a.jsx)("header",{className:"nav",children:(0,a.jsxs)("div",{className:"nav-container",children:[(0,a.jsx)("a",{href:"/",className:"nav-brand",children:"我的博客"}),(0,a.jsxs)("div",{className:"nav-links",children:[(0,a.jsx)("a",{href:"/",className:"nav-link",children:"首页"}),(0,a.jsx)("a",{href:"/blog",className:"nav-link",children:"文章"}),(0,a.jsx)("a",{href:"/categories",className:"nav-link",children:"分类"}),(0,a.jsx)("a",{href:"/about",className:"nav-link",children:"关于我"})]})]})}),i=()=>(0,a.jsx)("footer",{className:"footer",children:(0,a.jsx)("p",{children:"\xa9 2024 个人博客. All rights reserved."})}),c=({children:e})=>(0,a.jsxs)("div",{className:"layout",children:[(0,a.jsx)(s,{}),(0,a.jsx)("main",{children:e}),(0,a.jsx)(i,{})]})},6753:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(8732),s=r(1106),i=r.n(s),c=r(5445),n=r.n(c);let l=({articles:e=[],currentCategory:t,currentTag:r})=>{let s=Array.isArray(e)?e:[],c=s.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+1,e),{}),l=s.reduce((e,t)=>(t.tags.forEach(t=>{e[t]=(e[t]||0)+1}),e),{});return(0,a.jsxs)("div",{className:n().sidebar,children:[(0,a.jsxs)("section",{className:n().section,children:[(0,a.jsx)("h2",{className:n().sectionTitle,children:"分类"}),(0,a.jsx)("ul",{className:n().categoryList,children:Object.entries(c).map(([e,r])=>(0,a.jsx)("li",{className:`${n().categoryItem} ${t===e?n().active:""}`,children:(0,a.jsxs)(i(),{href:`/articles?category=${encodeURIComponent(e)}`,className:n().categoryLink,children:[e," (",r,")"]})},e))})]}),(0,a.jsxs)("section",{className:n().section,children:[(0,a.jsx)("h2",{className:n().sectionTitle,children:"标签"}),(0,a.jsx)("div",{className:n().tagCloud,children:Object.entries(l).map(([e,t])=>(0,a.jsxs)(i(),{href:`/articles?tag=${encodeURIComponent(e)}`,className:`${n().tag} ${r===e?n().activeTag:""}`,children:[e," (",t,")"]},e))})]})]})}},4158:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(8732),s=r(2015),i=r(6289),c=r.n(i);let n=({articleId:e})=>{let[t,r]=(0,s.useState)(0),[i,n]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let t=await fetch(`/api/articles/${e}/views`,{method:"POST"}),a=await t.json();r(a.views),n(!1)}catch(e){console.error("Error incrementing views:",e),n(!1)}})()},[e]),i)?(0,a.jsx)("span",{className:c().viewCount,children:"--"}):(0,a.jsxs)("span",{className:c().viewCount,children:[(0,a.jsx)("i",{className:"far fa-eye"})," ",t," 次浏览"]})}},693:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{GE:()=>n,Lp:()=>o,bW:()=>l});var s=r(2486),i=r(4748),c=e([s]);s=(c.then?(await c)():c)[0];let n=async()=>{try{{let e=await (0,s.zX)();return Array.isArray(e)?e.map(e=>({...e,views:(0,i.T)(e.id)})):[]}}catch(e){return console.error("Error in getArticles:",e),[]}},l=async()=>{try{let e=await n();if(!Array.isArray(e))return[];let t=new Set(e.map(e=>e.category).filter(Boolean));return Array.from(t)}catch(e){return console.error("Error in getCategories:",e),[]}},o=async e=>{try{let t=await n();if(!Array.isArray(t))return[];return t.filter(t=>t.category===e)}catch(e){return console.error("Error in getArticlesByCategory:",e),[]}};a()}catch(e){a(e)}})},2486:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{CL:()=>d,tY:()=>o,zX:()=>l});var s=r(8114),i=r(8328),c=e([s,i]);async function n(){{let e=await Promise.resolve().then(r.t.bind(r,9021,23)),t=await Promise.resolve().then(r.t.bind(r,3873,23)),a=(await Promise.resolve().then(r.t.bind(r,3531,23))).default,c=t.join(process.cwd(),"src/content/posts");return{getAllPosts:function(){return e.readdirSync(c).map(r=>{let s=r.replace(/\.md$/,""),i=t.join(c,r),n=e.readFileSync(i,"utf8"),l=a(n);return{id:s,...l.data,views:0}}).sort((e,t)=>e.date<t.date?1:-1)},getPostById:async function(r){let n=t.join(c,`${r}.md`),l=e.readFileSync(n,"utf8"),o=a(l),d=(await (0,s.remark)().use(i.default).process(o.content)).toString();return{id:r,contentHtml:d,...o.data,views:0}},getAllPostIds:function(){return e.readdirSync(c).map(e=>e.replace(/\.md$/,""))}}}}async function l(){try{let e=(await n()).getAllPosts();return Array.isArray(e)?e:[]}catch(e){return console.error("Error in getAllPosts:",e),[]}}async function o(e){return(await n()).getPostById(e)}async function d(){return(await n()).getAllPostIds()}[s,i]=c.then?(await c)():c,a()}catch(e){a(e)}})},4748:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});let a=new Map;function s(e){return a.get(e)||0}},3200:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(8732);r(9361);let s=function({Component:e,pageProps:t}){return(0,a.jsx)(e,{...t})}},6530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(8732),s=r(883),i=r.n(s);class c extends i(){render(){return(0,a.jsxs)(s.Html,{children:[(0,a.jsx)(s.Head,{children:(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})}),(0,a.jsxs)("body",{children:[(0,a.jsx)(s.Main,{}),(0,a.jsx)(s.NextScript,{})]})]})}}let n=c},292:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>m,getServerSideProps:()=>g});var s=r(8732),i=r(8318),c=r(6753),n=r(1364),l=r(693),o=r(7629),d=r.n(o),u=e([l]);async function g({query:e}){try{return{props:{articles:await (0,l.GE)()||[],query:{category:e.category||null,tag:e.tag||null}}}}catch(t){return console.error("Error fetching articles:",t),{props:{articles:[],query:{category:e.category||null,tag:e.tag||null}}}}}l=(u.then?(await u)():u)[0];let m=({query:e,articles:t})=>{let r=t||[],a="所有文章";return e.category&&(r=r.filter(t=>t.category===e.category),a=`${e.category} 分类下的文章`),e.tag&&(r=r.filter(t=>t.tags.includes(e.tag)),a=`标签：${e.tag}`),(0,s.jsx)(i.A,{children:(0,s.jsxs)("div",{className:d().pageContainer,children:[(0,s.jsx)(c.A,{articles:t,currentCategory:e.category,currentTag:e.tag}),(0,s.jsxs)("main",{className:d().mainContent,children:[(0,s.jsx)("h1",{className:d().pageTitle,children:a}),r.length>0?(0,s.jsx)(n.A,{articles:r}):(0,s.jsx)("div",{className:d().noResults,children:"没有找到相关文章"})]})]})})};a()}catch(e){a(e)}})},9361:()=>{},3531:e=>{"use strict";e.exports=require("gray-matter")},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:e=>{"use strict";e.exports=require("react")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},8114:e=>{"use strict";e.exports=import("remark")},8328:e=>{"use strict";e.exports=import("remark-html")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[883,990],()=>r(9914));module.exports=a})();