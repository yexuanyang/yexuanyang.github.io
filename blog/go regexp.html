<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><meta charSet="utf-8"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/><link rel="preload" href="/_next/static/css/71c3005585daf34a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/71c3005585daf34a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d30dc8bfc45a058b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d30dc8bfc45a058b.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-b96261d959dd50e7.js" defer=""></script><script src="/_next/static/chunks/main-5641a5f61dc27c0f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a20eeb038bec1046.js" defer=""></script><script src="/_next/static/chunks/106-a71b11894cb18610.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-99312d6fcde602f9.js" defer=""></script><script src="/_next/static/20UMOGqztqylNLBnC72Ga/_buildManifest.js" defer=""></script><script src="/_next/static/20UMOGqztqylNLBnC72Ga/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout"><header class="nav"><div class="nav-container"><a href="/" class="nav-brand">人生何处不青山</a><div class="nav-links"><a href="/" class="nav-link">首页</a><a href="/blog" class="nav-link">文章</a><a href="/categories" class="nav-link">分类</a><a href="/about" class="nav-link">关于我</a></div></div></header><main class="container"><article class="article_container__uEGY_"><header class="article_header__Dfu8i"><h1 class="article_title__Kemkb">Go正则表达式使用指南</h1><div class="article_meta__EQMJH"><span class="article_date__8Zsel">2023-07-31</span><a class="article_category__FEprG" href="/articles?category=GO">GO</a></div><div class="article_tags__SeZQL"><a class="article_tag__xFxqV" href="/articles?tag=GO">#<!-- -->GO</a></div></header><div class="article_content__xXtEi"><h2>Match方法</h2>
<p>serchIn是string类型,表示要匹配的字符串;pat表示匹配模式(正则表达式)</p>
<p><code>ok, _ := regexp.Match(pat, []byte(searchIn))</code></p>
<h2>MatchString方法</h2>
<p>searchIn是string类型</p>
<p><code>ok, _ := regexp.MatchString(pat, searchIn)</code></p>
<h2>其他的方法</h2>
<p>需要使用Compile返回一个Regexp对象</p>
<h2>例子</h2>
<h3>例子一</h3>
<pre><code class="language-go">package main
import (
"fmt"
"regexp"
"strconv"
)
func main() {
//目标字符串
searchIn := "John: 2578.34 William: 4567.23 Steve: 5632.18"
pat := "[0-9]+.[0-9]+" //正则
f := func(s string) string{
v, _ := strconv.ParseFloat(s, 32)
return strconv.FormatFloat(v * 2, 'f', 2, 32)
}
if ok, _ := regexp.Match(pat, []byte(searchIn)); ok {
fmt.Println("Match Found!")
}
re, _ := regexp.Compile(pat)
//将匹配到的部分替换为"##.#"
str := re.ReplaceAllString(searchIn, "##.#")
fmt.Println(str)
//参数为函数时
str2 := re.ReplaceAllStringFunc(searchIn, f)
fmt.Println(str2)
}
</code></pre>
<p>这段代码匹配了字符串中的浮点数(不完全正确,因为中间的.表示匹配任意字符,如果只是想匹配点字符那么要转义,例如 <code>"[0-9]+\\.[0-9]+"</code>),使用<strong>regexp.Match</strong>查看是否匹配,匹配之后采用<strong>regexp.Compile()<strong>获得一个</strong>Regexp</strong>对象,然后使用这个对象的方法<strong>ReplaceAllString</strong>和<strong>ReplaceAllStringFunc</strong>替换匹配到的字符串</p>
<p><strong>regexp.Compile</strong>有可能会返回错误,因为正则表达式可能是无效的;如果想要检验正则表达式的正确性可以使用**regexp.**<strong>MustCompile</strong>,如果不正确直接panic;</p>
<h2>正则表达式合法性检查</h2>
<p>给出一个可以匹配正则表达式的正则表达式(合法性检查),如果需要通过用户输入来得到正则表达式,可以采用下列方式验证表达式是否合理:</p>
<p><code>/^(?!(\?|\*|\+|\{\d+(?:,\d*)?\}))((?:[^\\\^\[\].|?+*()\s]+|\\.|\[.*?\])+)$/</code></p>
</div><footer class="article_footer__5JN_G"><div class="article_navigation__fJhBJ"><a class="article_backButton__FZQSF" href="/blog">返回文章列表</a></div></footer></article></main><footer class="footer"><p>© 2024 个人博客. All rights reserved.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"id":"go regexp","contentHtml":"\u003ch2\u003eMatch方法\u003c/h2\u003e\n\u003cp\u003eserchIn是string类型,表示要匹配的字符串;pat表示匹配模式(正则表达式)\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eok, _ := regexp.Match(pat, []byte(searchIn))\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003eMatchString方法\u003c/h2\u003e\n\u003cp\u003esearchIn是string类型\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eok, _ := regexp.MatchString(pat, searchIn)\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003e其他的方法\u003c/h2\u003e\n\u003cp\u003e需要使用Compile返回一个Regexp对象\u003c/p\u003e\n\u003ch2\u003e例子\u003c/h2\u003e\n\u003ch3\u003e例子一\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-go\"\u003epackage main\r\nimport (\r\n\"fmt\"\r\n\"regexp\"\r\n\"strconv\"\r\n)\r\nfunc main() {\r\n//目标字符串\r\nsearchIn := \"John: 2578.34 William: 4567.23 Steve: 5632.18\"\r\npat := \"[0-9]+.[0-9]+\" //正则\r\nf := func(s string) string{\r\nv, _ := strconv.ParseFloat(s, 32)\r\nreturn strconv.FormatFloat(v * 2, 'f', 2, 32)\r\n}\r\nif ok, _ := regexp.Match(pat, []byte(searchIn)); ok {\r\nfmt.Println(\"Match Found!\")\r\n}\r\nre, _ := regexp.Compile(pat)\r\n//将匹配到的部分替换为\"##.#\"\r\nstr := re.ReplaceAllString(searchIn, \"##.#\")\r\nfmt.Println(str)\r\n//参数为函数时\r\nstr2 := re.ReplaceAllStringFunc(searchIn, f)\r\nfmt.Println(str2)\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这段代码匹配了字符串中的浮点数(不完全正确,因为中间的.表示匹配任意字符,如果只是想匹配点字符那么要转义,例如 \u003ccode\u003e\"[0-9]+\\\\.[0-9]+\"\u003c/code\u003e),使用\u003cstrong\u003eregexp.Match\u003c/strong\u003e查看是否匹配,匹配之后采用\u003cstrong\u003eregexp.Compile()\u003cstrong\u003e获得一个\u003c/strong\u003eRegexp\u003c/strong\u003e对象,然后使用这个对象的方法\u003cstrong\u003eReplaceAllString\u003c/strong\u003e和\u003cstrong\u003eReplaceAllStringFunc\u003c/strong\u003e替换匹配到的字符串\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eregexp.Compile\u003c/strong\u003e有可能会返回错误,因为正则表达式可能是无效的;如果想要检验正则表达式的正确性可以使用**regexp.**\u003cstrong\u003eMustCompile\u003c/strong\u003e,如果不正确直接panic;\u003c/p\u003e\n\u003ch2\u003e正则表达式合法性检查\u003c/h2\u003e\n\u003cp\u003e给出一个可以匹配正则表达式的正则表达式(合法性检查),如果需要通过用户输入来得到正则表达式,可以采用下列方式验证表达式是否合理:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e/^(?!(\\?|\\*|\\+|\\{\\d+(?:,\\d*)?\\}))((?:[^\\\\\\^\\[\\].|?+*()\\s]+|\\\\.|\\[.*?\\])+)$/\u003c/code\u003e\u003c/p\u003e\n","title":"Go正则表达式使用指南","date":"2023-07-31","category":"GO","tags":["GO"],"summary":"介绍Go语言中正则表达式的常用方法和使用场景","views":0}},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"go regexp"},"buildId":"20UMOGqztqylNLBnC72Ga","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>