<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><meta charSet="utf-8"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/><link rel="preload" href="/_next/static/css/71c3005585daf34a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/71c3005585daf34a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d30dc8bfc45a058b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d30dc8bfc45a058b.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-b96261d959dd50e7.js" defer=""></script><script src="/_next/static/chunks/main-5641a5f61dc27c0f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a20eeb038bec1046.js" defer=""></script><script src="/_next/static/chunks/106-a71b11894cb18610.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-99312d6fcde602f9.js" defer=""></script><script src="/_next/static/20UMOGqztqylNLBnC72Ga/_buildManifest.js" defer=""></script><script src="/_next/static/20UMOGqztqylNLBnC72Ga/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout"><header class="nav"><div class="nav-container"><a href="/" class="nav-brand">人生何处不青山</a><div class="nav-links"><a href="/" class="nav-link">首页</a><a href="/blog" class="nav-link">文章</a><a href="/categories" class="nav-link">分类</a><a href="/about" class="nav-link">关于我</a></div></div></header><main class="container"><article class="article_container__uEGY_"><header class="article_header__Dfu8i"><h1 class="article_title__Kemkb">Go与C语言交互基础教程</h1><div class="article_meta__EQMJH"><span class="article_date__8Zsel">2023-07-31</span><a class="article_category__FEprG" href="/articles?category=GO">GO</a></div><div class="article_tags__SeZQL"><a class="article_tag__xFxqV" href="/articles?tag=GO">#<!-- -->GO</a><a class="article_tag__xFxqV" href="/articles?tag=C">#<!-- -->C</a></div></header><div class="article_content__xXtEi"><h2>go fix</h2>
<p>go fix用来将代码从旧的发行版更新到新的发行版</p>
<h2>cgo</h2>
<p>在go语言中调用c语言代码方式：import "C"，在该语句前加上要引入的C头文件（以注释的形式引入），例如：</p>
<pre><code class="language-go">// #include &#x3C;stdio.h>
// #include &#x3C;stdlib.h>
import "C"

</code></pre>
<p>C不是一个标准库，只是cgo的一个特殊名称用来引用C的命名空间</p>
<p>想要把一个字符串从C转换到Go，使用C.GoString();想要把字符串从Go转换到C，使用C.CString()</p>
<p>Go的内存管理机制不能管理C分配的内存，需要使用C.free()来释放内存，例如 <code>C.free(unsafe.pointer(CVarible))</code></p>
<p>要编译cgo包，需要在Makefile中定义CGOFILES，使用gomake或者make编译</p>
<h2>C存根函数</h2>
<p>声明但未实现的函数</p>
<h2>SWIG（简化封装器和接口生成器）实现和C++交互</h2>
<p>SWIG注意事项：</p>
<ul>
<li>编写需要封装的go库</li>
<li>SWIG会自动生成存根函数</li>
<li>可以使用cgo调用这些库</li>
<li>相关的go文件会自动生成</li>
</ul>
</div><footer class="article_footer__5JN_G"><div class="article_navigation__fJhBJ"><a class="article_backButton__FZQSF" href="/blog">返回文章列表</a></div></footer></article></main><footer class="footer"><p>© 2024 个人博客. All rights reserved.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"id":"go_c_ffi","contentHtml":"\u003ch2\u003ego fix\u003c/h2\u003e\n\u003cp\u003ego fix用来将代码从旧的发行版更新到新的发行版\u003c/p\u003e\n\u003ch2\u003ecgo\u003c/h2\u003e\n\u003cp\u003e在go语言中调用c语言代码方式：import \"C\"，在该语句前加上要引入的C头文件（以注释的形式引入），例如：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-go\"\u003e// #include \u0026#x3C;stdio.h\u003e\r\n// #include \u0026#x3C;stdlib.h\u003e\r\nimport \"C\"\r\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eC不是一个标准库，只是cgo的一个特殊名称用来引用C的命名空间\u003c/p\u003e\n\u003cp\u003e想要把一个字符串从C转换到Go，使用C.GoString();想要把字符串从Go转换到C，使用C.CString()\u003c/p\u003e\n\u003cp\u003eGo的内存管理机制不能管理C分配的内存，需要使用C.free()来释放内存，例如 \u003ccode\u003eC.free(unsafe.pointer(CVarible))\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e要编译cgo包，需要在Makefile中定义CGOFILES，使用gomake或者make编译\u003c/p\u003e\n\u003ch2\u003eC存根函数\u003c/h2\u003e\n\u003cp\u003e声明但未实现的函数\u003c/p\u003e\n\u003ch2\u003eSWIG（简化封装器和接口生成器）实现和C++交互\u003c/h2\u003e\n\u003cp\u003eSWIG注意事项：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e编写需要封装的go库\u003c/li\u003e\n\u003cli\u003eSWIG会自动生成存根函数\u003c/li\u003e\n\u003cli\u003e可以使用cgo调用这些库\u003c/li\u003e\n\u003cli\u003e相关的go文件会自动生成\u003c/li\u003e\n\u003c/ul\u003e\n","title":"Go与C语言交互基础教程","date":"2023-07-31","category":"GO","tags":["GO","C"],"summary":"介绍Go语言与C语言交互的基本知识和使用方法","views":0}},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"go_c_ffi"},"buildId":"20UMOGqztqylNLBnC72Ga","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>